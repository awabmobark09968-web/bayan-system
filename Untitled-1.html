<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù†Ø¸Ø§Ù… Ø´Ø±ÙƒØ© Ø¨ÙŠØ§Ù† â€“ ÙŠÙˆÙ…ÙŠ Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

<style>
:root{
    --primary:#0B5ED7;
    --primary-dark:#084298;
    --bg:#F5F7FA;
    --card:#FFFFFF;
    --text:#212529;
    --muted:#6C757D;
    --success:#198754;
    --danger:#DC3545;
    --radius:12px;
}

/* reset */
*{
    box-sizing:border-box;
    font-family:"Segoe UI", Tahoma, Arial, sans-serif;
}

body{
    margin:0;
    background:var(--bg);
    color:var(--text);
    direction:rtl;
}

/* app wrapper */
#app{
    max-width:1200px;
    margin:30px auto;
    background:var(--card);
    padding:30px;
    border-radius:var(--radius);
    box-shadow:0 12px 30px rgba(0,0,0,.08);
}

/* title */
#app h1{
    text-align:center;
    color:var(--primary-dark);
    margin-bottom:30px;
}

/* top inputs */
.top{
    display:flex;
    gap:20px;
    flex-wrap:wrap;
    margin-bottom:20px;
}

.top > div{
    flex:1;
    min-width:220px;
}

label{
    display:block;
    margin-bottom:6px;
    font-size:14px;
    color:var(--muted);
}

/* inputs */
input[type="text"],
input[type="date"],
select,
textarea{
    width:100%;
    padding:11px 14px;
    border:1px solid #CED4DA;
    border-radius:10px;
    font-size:14px;
}

textarea{
    min-height:90px;
    resize:vertical;
}

input:focus,
select:focus,
textarea:focus{
    outline:none;
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(11,94,215,.15);
}

/* buttons */
.top-buttons{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    margin:25px 0;
}

.top-buttons button{
    padding:12px 18px;
    border:none;
    border-radius:10px;
    font-size:14px;
    cursor:pointer;
    background:var(--primary);
    color:#fff;
    transition:.25s;
}

.top-buttons button:hover{
    background:var(--primary-dark);
}

/* special buttons colors */
.top-buttons button:nth-child(1){background:var(--success);}
.top-buttons button:nth-child(5){background:var(--danger);}
.top-buttons button:nth-child(2){background:#6C757D;}
.top-buttons button:nth-child(3),
.top-buttons button:nth-child(4){background:#0D6EFD;}

/* form area */
.container{
    margin:25px 0;
    border:1px solid #E9ECEF;
    border-radius:var(--radius);
    padding:20px;
    background:#fff;
}
/* container Ù„Ù„Ø£Ù‚Ø³Ø§Ù… */
#formArea{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(450px, 1fr));
    gap:20px;
    margin-top:25px;
}

/* ÙƒÙ„ ØµÙ†Ø¯ÙˆÙ‚ Ù‚Ø³Ù… */
.box{
    background:#fff;
    padding:20px;
    border-radius:12px;
    box-shadow:0 8px 20px rgba(0,0,0,.08);
    display:flex;
    flex-direction:column;
}

/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù… */
.box h2{
    background:var(--primary);
    color:#fff;
    padding:10px;
    border-radius:8px;
    text-align:center;
    font-size:16px;
    margin-bottom:15px;
}

/* ÙƒÙ„ Ø­Ù‚Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø³Ù… */
.field{
    margin-bottom:12px;
}

.field label{
    display:block;
    font-size:14px;
    color:var(--muted);
    margin-bottom:4px;
}

.field input{
    width:100%;
    padding:10px 12px;
    border:1px solid #CED4DA;
    border-radius:8px;
    font-size:14px;
}

.field input:focus{
    outline:none;
    border-color:var(--primary);
    box-shadow:0 0 0 3px rgba(11,94,215,.15);
}
/* Ø§Ù„ØªÙ‚Ø±ÙŠØ± */
#report{
    margin-top:25px;
    padding:20px;
    background:#F8FAFC;
    border:1px solid #E9ECEF;
    border-radius:12px;
    overflow-x:auto;
}

/* Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± */
#report table{
    width:100%;
    border-collapse:collapse;
    min-width:600px;
}

#report th, #report td{
    padding:12px 14px;
    border:1px solid #E9ECEF;
    text-align:right;
    font-size:14px;
}

#report th{
    background:#0B5ED7;
    color:#fff;
    font-weight:600;
    text-align:center;
}

#report tr:nth-child(even){
    background:#F5F9FF;
}

#report tr:hover td{
    background:#E3EEFF;
}


/* report box */
#report{
    margin-top:25px;
    padding:20px;
    background:#F8FAFC;
    border:1px solid #E9ECEF;
    border-radius:var(--radius);
}

/* print */
@media print{
    body *{
        visibility: hidden;
    }

    #report, #report *{
        visibility: visible;
    }

    #report{
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        background: #fff;
        padding: 20px;
    }
}


</style>
</head>

<body>
<div id="app">

<h1>Ø´Ø±ÙƒØ© Ø¨ÙŠØ§Ù† â€“ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©</h1>

<div class="top">
    <div>
        <label>ğŸ“… Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…Ø³Ø¬Ù„Ø©:</label>
        <select id="daysList"></select>
    </div>
    <div>
        <label>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
        <input type="date" id="day">
    </div>
</div>

<div class="top-buttons">
<button onclick="saveData()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙŠÙˆÙ…</button>
<button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
<button onclick="showReport()">ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…</button>
<button onclick="showAllReport()">ğŸ“Š ØªÙ‚Ø±ÙŠØ± ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù…</button>
<button onclick="deleteDay()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙŠÙˆÙ…</button>
<button onclick="exportPDF()">ğŸ“„ ØªØµØ¯ÙŠØ± PDF Ù„ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù…</button>
<button onclick="exportDailyPDF()">ğŸ“„ ØªØµØ¯ÙŠØ± PDF Ù„ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯</button>
</div>

<label>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨:</label>
<input type="text" id="employeeName">

<div class="container" id="formArea"></div>

<h3>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©</h3>
<textarea id="notes"></textarea>

<div id="report"></div>

</div>

<script>
/* ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ===== */
const dayInput = document.getElementById("day");
const daysList = document.getElementById("daysList");
const employeeInput = document.getElementById("employeeName");
const notes = document.getElementById("notes");
const report = document.getElementById("report");

/* ===== Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ===== */
const sections={
"ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØµØ­Ø©":["Ù…ÙˆØ¹Ø¯ ÙƒØ´Ù Ø·Ø¨ÙŠ Ø£ÙˆÙ„ Ù…Ø±Ø©","Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ÙƒØ´Ù Ø§Ù„Ø·Ø¨ÙŠ","ØªØ¬Ø¯ÙŠØ¯ ØªØ£Ù…ÙŠÙ† ØµØ­ÙŠ","ÙØµÙŠÙ„Ø© Ø§Ù„Ø¯Ù…"],
"ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© â€“ Ø´Ø¤ÙˆÙ† Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©":["Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©","Ø¥ØµØ¯Ø§Ø± ÙÙŠØ²Ø§","Ø¥Ù‚Ø§Ù…Ø© Ø£ÙˆÙ„ Ù…Ø±Ø©","ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©","Ø¥Ù‚Ø§Ù…Ø© Ù…Ø¤Ù‚ØªØ©","Ø§Ù„Ø¨ØµÙ…Ø©"],
"Ø¨Ù„Ø¯ÙŠØ© Ø§Ù„ÙƒÙˆÙŠØª":["Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù„Ø¯ÙŠØ© Ø£ÙˆÙ„ Ù…Ø±Ø©","Ø­Ø¬Ø² Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©","ØªØ¬Ø¯ÙŠØ¯ Ø¥Ø¹Ù„Ø§Ù† Ø¨Ù„Ø¯ÙŠØ©","ØªØ¬Ø¯ÙŠØ¯ ÙƒØ±Øª Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©","ÙƒØ±Øª Ø¨Ù„Ø¯ÙŠØ© Ø£ÙˆÙ„ Ù…Ø±Ø©"],
"Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¯Ù†ÙŠØ©":["ØªØºÙŠÙŠØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©","Ø¨Ø·Ø§Ù‚Ø© Ù…Ø¯Ù†ÙŠØ© Ø£ÙˆÙ„ Ù…Ø±Ø©","ØªØ¬Ø¯ÙŠØ¯ Ø¨Ø·Ø§Ù‚Ø© Ù…Ø¯Ù†ÙŠØ©"],
"Ù‡ÙŠØ¦Ø© Ø§Ù„ØºØ°Ø§Ø¡":["ÙƒØ±Øª Ù‡ÙŠØ¦Ø© Ø§Ù„ØºØ°Ø§Ø¡ Ø£ÙˆÙ„ Ù…Ø±Ø©","ØªØ¬Ø¯ÙŠØ¯ ÙƒØ±Øª Ù‡ÙŠØ¦Ø© Ø§Ù„ØºØ°Ø§Ø¡"],
"Ø§Ù„Ø¥Ø·ÙØ§Ø¡":["Ø¥ØµØ¯Ø§Ø± ØªØ±Ø®ÙŠØµ Ø¥Ø·ÙØ§Ø¡","ØªØ¬Ø¯ÙŠØ¯ ØªØ±Ø®ÙŠØµ Ø¥Ø·ÙØ§Ø¡"],
"ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©":["ØªØµØ¯ÙŠÙ‚Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©","ØªØµØ¯ÙŠÙ‚Ø§Øª Ø§Ù„Ø³ÙØ§Ø±Ø©"],
"Ø§Ù„Ù…Ø±ÙˆØ±":[
    "ØªØ¬Ø¯ÙŠØ¯ Ø¯ÙØ§ØªØ± Ù…Ø±ÙƒØ¨Ø§Øª","Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙØ­Øµ Ø§Ù„ÙÙ†ÙŠ","ØªØ¬Ø¯ÙŠØ¯ Ø¯ÙØ§ØªØ± Ø¯Ø±Ø§Ø¬Ø§Øª","ÙØ­Øµ Ù†Ø¸Ø± Ø£ÙˆÙ„ Ù…Ø±Ø©",
    "Ø§Ø³ØªÙ…Ø§Ø±Ø§Øª Ø£ÙˆÙ„ Ù…Ø±Ø©","Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø±Ø®ØµØ© Ø£ÙˆÙ„ Ù…Ø±Ø©","Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±Ø§ÙŠ","Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø­ÙˆØ§Ø¯Ø«",
    "ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø®ØµØ©","Ø³ÙƒØ±Ø§Ø¨ Ø³ÙŠØ§Ø±Ø§Øª","Ø®ØªÙ… Ø§Ù„ØªÙ†Ø³ÙŠÙ‚","Ø­Ø¬Ø² Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©",
    "Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙˆØ±","ÙÙ‚Ø¯Ø§Ù† Ø¯ÙØªØ± Ù…Ø±ÙƒØ¨Ø©","ØªØ­ÙˆÙŠÙ„ Ù…Ø±ÙƒØ¨Ø§Øª"
],
"Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø©":[
    "Ø¥Ø°Ù† Ø¹Ù…Ù„ Ø£ÙˆÙ„ Ù…Ø±Ø©","ØªØµØ±ÙŠØ­ Ø¹Ù…Ù„","ØªØ¬Ø¯ÙŠØ¯ Ø¥Ø°Ù† Ø¹Ù…Ù„","Ø¥Ù„ØºØ§Ø¡ Ù†Ù‡Ø§Ø¦ÙŠ",
    "Ø¥Ù„ØºØ§Ø¡ ÙˆØªØ­ÙˆÙŠÙ„","Ø¨Ù„Ø§ØºØ§Øª ÙˆØªØºÙŠØ¨","Ø´ÙƒØ§ÙˆÙŠ Ø¹Ù…Ø§Ù„ÙŠØ©"
],
"Ø´Ø±ÙƒØ§Øª Ø®Ø§ØµØ©":[
    "Ø­Ø¬Ø² ØªØ°Ø§ÙƒØ±","ØªØ±Ø¬Ù…Ø© ØµØ­ÙŠÙØ© Ø¬Ù†Ø§Ø¦ÙŠØ©","ØªØ±Ø¬Ù…Ø© Ø±Ø®ØµØ©","ÙØªØ­ Ø­Ø³Ø§Ø¨ Ø¨Ù†Ùƒ",
    "ØªØ£Ø¬ÙŠØ± Ø³ÙŠØ§Ø±Ø§Øª","Ø¥Ø®Ù„Ø§Ø¡ Ø´Ù‚Ù‚","Ø¥Ø®Ù„Ø§Ø¡ Ù…ÙƒØ§ØªØ¨","ØªØ¬Ø¯ÙŠØ¯ ØªØ£Ù…ÙŠÙ† Ù…Ø±ÙƒØ¨Ø§Øª",
    "ØªØ¬Ø¯ÙŠØ¯ ØªØ£Ù…ÙŠÙ† Ø¯Ø±Ø§Ø¬Ø§Øª","Ø§Ø³ØªÙ„Ø§Ù… Ø³ÙŠØ§Ø±Ø§Øª"
]
};

const formArea=document.getElementById("formArea");
for(let s in sections){
    let box=document.createElement("div");
    box.className="box";
    box.innerHTML=`<h2>${s}</h2>`;
    sections[s].forEach(f=>{
        box.innerHTML+=`
        <div class="field">
            <label>${f}</label>
            <input data-key="${s}-${f}">
        </div>`;
    });
    formArea.appendChild(box);
}

/* ===== Ø­ÙØ¸ ===== */
function saveData(){
    let day=dayInput.value;
    if(!day){alert("Ø§Ø®ØªØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®");return;}
    let data={};
    document.querySelectorAll("input[data-key]").forEach(i=>{
        data[i.dataset.key]=i.value;
    });
    data.notes=notes.value;
    localStorage.setItem("bayan-"+day,JSON.stringify(data));
    updateDaysList();
    alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
}

/* ===== ØªØ­Ù…ÙŠÙ„ ===== */
function loadDay(day){
    if(!day) day=dayInput.value;
    let data=JSON.parse(localStorage.getItem("bayan-"+day)||"{}");
    document.querySelectorAll("input[data-key]").forEach(i=>{
        i.value=data[i.dataset.key]||"";
    });
    notes.value=data.notes||"";
}

/* ===== Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ===== */
function showReport(){
    let day = dayInput.value;
    let data = JSON.parse(localStorage.getItem("bayan-"+day) || "{}");

    let html = `<h3>ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ… ${day}</h3>`;
    html += `<table>
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                        <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                    </tr>
                </thead>
                <tbody>`;

    for(let k in data){
        html += `<tr>
                    <td>${k}</td>
                    <td>${data[k]}</td>
                 </tr>`;
    }

    html += `</tbody></table>`;
    report.innerHTML = html;
}


function showAllReport(){
    let html="<h3>ØªÙ‚Ø±ÙŠØ± ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù…</h3><table><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th><th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th></tr>";
    for(let i=0;i<localStorage.length;i++){
        let key=localStorage.key(i);
        if(key.startsWith("bayan-")){
            let day=key.replace("bayan-","");
            let data=JSON.parse(localStorage.getItem(key));
            for(let k in data){
                html+=`<tr><td>${day}</td><td>${k}</td><td>${data[k]}</td></tr>`;
            }
        }
    }
    html+="</table>";
    report.innerHTML=html;
}

/* ===== Ø­Ø°Ù ===== */
function deleteDay(){
    let day=dayInput.value;
    if(confirm("Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª "+day+"ØŸ")){
        localStorage.removeItem("bayan-"+day);
        loadDay(day);
        updateDaysList();
    }
}

/* ===== Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ===== */
function updateDaysList(){
    daysList.innerHTML="";
    Object.keys(localStorage).filter(k=>k.startsWith("bayan-")).sort().forEach(k=>{
        let d=k.replace("bayan-","");
        let o=document.createElement("option");
        o.value=d;o.text=d;
        daysList.appendChild(o);
    });
}
daysList.onchange=()=>loadDay(daysList.value);

/* ===== PDF ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯ ===== */
function exportDailyPDF(){
    try{
        const { jsPDF } = window.jspdf;
        let doc = new jsPDF("p","mm","a4");

        let day = dayInput.value;
        if(!day){
            alert("Ø§Ø®ØªØ§Ø± Ø§Ù„ØªØ§Ø±ÙŠØ®");
            return;
        }

        let employee = employeeInput.value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
        let data = JSON.parse(localStorage.getItem("bayan-"+day) || "{}");

        // Ø¹Ù†ÙˆØ§Ù†
        doc.setFontSize(18);
        doc.text(
            "Ø´Ø±ÙƒØ© Ø¨ÙŠØ§Ù† â€“ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©",
            doc.internal.pageSize.getWidth()/2,
            20,
            {align:"center"}
        );

        doc.setFontSize(12);
        doc.text("Ø§Ù„ØªØ§Ø±ÙŠØ®: " + day, 190, 35, {align:"right"});
        doc.text("Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨: " + employee, 190, 43, {align:"right"});

        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        let rows=[];
        for(let k in data){
            if(data[k]) rows.push([k, data[k]]);
        }

        // Ø¬Ø¯ÙˆÙ„
        doc.autoTable({
            startY: 55,
            head: [["Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡","Ø§Ù„Ù‚ÙŠÙ…Ø©"]],
            body: rows,
            styles:{
                fontSize: 11,
                halign: "right",
                cellPadding: 4
            },
            headStyles:{
                fillColor:[11,94,215],
                halign:"center"
            },
            theme:"grid"
        });

        doc.save(`ØªÙ‚Ø±ÙŠØ±_${day}.pdf`);
    }
    catch(e){
        console.error(e);
        alert("Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØµØ¯ÙŠØ±");
    }
}
/* ===== PDF ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù… ===== */
function exportPDF(){
    try{
        const { jsPDF } = window.jspdf;
        let doc = new jsPDF("p","mm","a4");

        // Ø¹Ù†ÙˆØ§Ù†
        doc.setFontSize(18);
        doc.text(
            "Ø´Ø±ÙƒØ© Ø¨ÙŠØ§Ù† â€“ ØªÙ‚Ø±ÙŠØ± ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù…",
            doc.internal.pageSize.getWidth()/2,
            20,
            {align:"center"}
        );

        let startY = 35;

        // Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù…
        let keys = Object.keys(localStorage)
            .filter(k => k.startsWith("bayan-"))
            .sort();

        if(keys.length === 0){
            alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©");
            return;
        }

        keys.forEach((key, index) => {
            let day = key.replace("bayan-","");
            let data = JSON.parse(localStorage.getItem(key) || "{}");

            // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙŠÙˆÙ…
            doc.setFontSize(14);
            doc.text("ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: " + day, 190, startY, {align:"right"});
            startY += 6;

            let rows = [];
            for(let k in data){
                if(data[k]){
                    rows.push([k, data[k]]);
                }
            }

            // Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…
            doc.autoTable({
                startY: startY,
                head: [["Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡","Ø§Ù„Ù‚ÙŠÙ…Ø©"]],
                body: rows,
                styles:{
                    fontSize: 10,
                    halign: "right",
                    cellPadding: 4
                },
                headStyles:{
                    fillColor:[11,94,215],
                    halign:"center"
                },
                theme:"grid"
            });

            startY = doc.lastAutoTable.finalY + 10;

            // ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ùˆ Ù…Ø´ Ø¢Ø®Ø± ÙŠÙˆÙ…
            if(index < keys.length - 1){
                doc.addPage();
                startY = 20;
            }
        });

        doc.save("ØªÙ‚Ø±ÙŠØ±_ÙƒÙ„_Ø§Ù„Ø£ÙŠØ§Ù….pdf");
    }
    catch(e){
        console.error(e);
        alert("Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØµØ¯ÙŠØ± PDF");
    }
}

/* ===== ØªØ´ØºÙŠÙ„ ===== */
dayInput.value=new Date().toISOString().split("T")[0];
updateDaysList();
loadDay();
</script>

</body>
</html>
